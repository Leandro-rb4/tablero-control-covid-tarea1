---
title: "COVID-19 en Costa Rica"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)

library(sf)

library(leaflet)

library(knitr)

library(kableExtra)

library(dplyr)

library(spData)

library(ggplot2)

#Covid-19 en Costa Rica
covid19_cr = (st_read("https://raw.githubusercontent.com/geoprocesamiento-2020i/datos/master/covid19/casos/cr/cr-covid19-cantones.geojson"))

```

Provincias {data-width=500}
=======================================================================


Column {data-width=500}
-----------------------------------------------------------------------
### Chart A

```{r}
```

### Casos confirmados de COVID-19 por provincia en Costa Rica

```{r}

confirmados_cr = aggregate(
  data = covid19_cr, 
  confirmados ~ provincia, 
  FUN = sum, 
  na.rm = TRUE
)

ggplot(confirmados_cr, aes(x=reorder(provincia,-confirmados), y=confirmados)) +
   xlab("Provincia") + 
   ylab("Casos de COVID-19 ") +  
   geom_col() +
   geom_text(aes(label= confirmados), vjust=-0.3, size=3.5)

```

Column {data-width=500}
-----------------------------------------------------------------------
### Chart Bb

```{r}
```

Cantones {data-width=500}
=======================================================================

Column {data-width=500}
-----------------------------------------------------------------------
### Chart C

```{r}
```

Column {data-width=500}
-----------------------------------------------------------------------
### Casos confirmados, recuperados y fallecidos de COVID-19 por cantón en Costa Rica

```{r}
covid19_cr %>%
  select(Cantón = canton, Confirmados = confirmados, Recuperados =recuperados, Fallecidos = muertes)%>%
  arrange(Cantón) %>%
  st_drop_geometry() %>%
  kable()%>%
  kable_styling() %>%
  scroll_box(
    width = "630px", 
    height = "540px", 
    fixed_thead = TRUE
  )
```

